{"ast":null,"code":"async function posts(req, res) {\n  const {\n    page = 1\n  } = req.query;\n  const posts = await fetch(`https://www.diogocezar.com/wp-json/wp/v2/posts?page=${page}`);\n  const total = parseInt(posts.headers[\"x-wp-total\"], 10);\n  console.log(total);\n  const totalPages = parseInt(posts.headers[\"x-wp-totalpages\"], 10); //console.log(posts.headers);\n\n  const postsJson = await posts.json();\n  res.setHeader(\"Cache-Control\", \"s-maxage=10, stale-while-revalidate\");\n  res.json({\n    date: new Date().toUTCString(),\n    posts: postsJson,\n    total: total,\n    totalPages: totalPages\n  });\n}\n\nexport default posts;","map":{"version":3,"sources":["/Users/diogocezar/studies/nextjs/pages/api/posts.ts"],"names":["posts","req","res","page","query","fetch","total","parseInt","headers","console","log","totalPages","postsJson","json","setHeader","date","Date","toUTCString"],"mappings":"AAAA,eAAeA,KAAf,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+B;AAC7B,QAAM;AAAEC,IAAAA,IAAI,GAAG;AAAT,MAAeF,GAAG,CAACG,KAAzB;AACA,QAAMJ,KAAK,GAAG,MAAMK,KAAK,CACtB,uDAAsDF,IAAK,EADrC,CAAzB;AAGA,QAAMG,KAAK,GAAGC,QAAQ,CAACP,KAAK,CAACQ,OAAN,CAAc,YAAd,CAAD,EAA8B,EAA9B,CAAtB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACA,QAAMK,UAAU,GAAGJ,QAAQ,CAACP,KAAK,CAACQ,OAAN,CAAc,iBAAd,CAAD,EAAmC,EAAnC,CAA3B,CAP6B,CAQ7B;;AACA,QAAMI,SAAS,GAAG,MAAMZ,KAAK,CAACa,IAAN,EAAxB;AACAX,EAAAA,GAAG,CAACY,SAAJ,CAAc,eAAd,EAA+B,qCAA/B;AACAZ,EAAAA,GAAG,CAACW,IAAJ,CAAS;AACPE,IAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EADC;AAEPjB,IAAAA,KAAK,EAAEY,SAFA;AAGPN,IAAAA,KAAK,EAAEA,KAHA;AAIPK,IAAAA,UAAU,EAAEA;AAJL,GAAT;AAMD;;AAED,eAAeX,KAAf","sourcesContent":["async function posts(req, res) {\n  const { page = 1 } = req.query;\n  const posts = await fetch(\n    `https://www.diogocezar.com/wp-json/wp/v2/posts?page=${page}`\n  );\n  const total = parseInt(posts.headers[\"x-wp-total\"], 10);\n  console.log(total);\n  const totalPages = parseInt(posts.headers[\"x-wp-totalpages\"], 10);\n  //console.log(posts.headers);\n  const postsJson = await posts.json();\n  res.setHeader(\"Cache-Control\", \"s-maxage=10, stale-while-revalidate\");\n  res.json({\n    date: new Date().toUTCString(),\n    posts: postsJson,\n    total: total,\n    totalPages: totalPages,\n  });\n}\n\nexport default posts;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"async function posts(req, res) {\n  const {\n    page = 1\n  } = req.query;\n  const posts = await fetch(`https://www.diogocezar.com/wp-json/wp/v2/posts?page=${page}`);\n  const total = parseInt(posts.headers.get(\"x-wp-total\"), 10);\n  console.log(total);\n  const totalPages = parseInt(posts.headers[\"x-wp-totalpages\"], 10); //console.log(posts.headers);\n\n  const postsJson = await posts.json();\n  res.setHeader(\"Cache-Control\", \"s-maxage=10, stale-while-revalidate\");\n  res.json({\n    date: new Date().toUTCString(),\n    posts: postsJson,\n    total: total,\n    totalPages: totalPages\n  });\n}\n\nexport default posts;","map":{"version":3,"sources":["/Users/diogocezar/studies/nextjs/pages/api/posts.ts"],"names":["posts","req","res","page","query","fetch","total","parseInt","headers","get","console","log","totalPages","postsJson","json","setHeader","date","Date","toUTCString"],"mappings":"AAAA,eAAeA,KAAf,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+B;AAC7B,QAAM;AAAEC,IAAAA,IAAI,GAAG;AAAT,MAAeF,GAAG,CAACG,KAAzB;AACA,QAAMJ,KAAK,GAAG,MAAMK,KAAK,CACtB,uDAAsDF,IAAK,EADrC,CAAzB;AAGA,QAAMG,KAAK,GAAGC,QAAQ,CAACP,KAAK,CAACQ,OAAN,CAAcC,GAAd,CAAkB,YAAlB,CAAD,EAAkC,EAAlC,CAAtB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACA,QAAMM,UAAU,GAAGL,QAAQ,CAACP,KAAK,CAACQ,OAAN,CAAc,iBAAd,CAAD,EAAmC,EAAnC,CAA3B,CAP6B,CAQ7B;;AACA,QAAMK,SAAS,GAAG,MAAMb,KAAK,CAACc,IAAN,EAAxB;AACAZ,EAAAA,GAAG,CAACa,SAAJ,CAAc,eAAd,EAA+B,qCAA/B;AACAb,EAAAA,GAAG,CAACY,IAAJ,CAAS;AACPE,IAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EADC;AAEPlB,IAAAA,KAAK,EAAEa,SAFA;AAGPP,IAAAA,KAAK,EAAEA,KAHA;AAIPM,IAAAA,UAAU,EAAEA;AAJL,GAAT;AAMD;;AAED,eAAeZ,KAAf","sourcesContent":["async function posts(req, res) {\n  const { page = 1 } = req.query;\n  const posts = await fetch(\n    `https://www.diogocezar.com/wp-json/wp/v2/posts?page=${page}`\n  );\n  const total = parseInt(posts.headers.get(\"x-wp-total\"), 10);\n  console.log(total);\n  const totalPages = parseInt(posts.headers[\"x-wp-totalpages\"], 10);\n  //console.log(posts.headers);\n  const postsJson = await posts.json();\n  res.setHeader(\"Cache-Control\", \"s-maxage=10, stale-while-revalidate\");\n  res.json({\n    date: new Date().toUTCString(),\n    posts: postsJson,\n    total: total,\n    totalPages: totalPages,\n  });\n}\n\nexport default posts;\n"]},"metadata":{},"sourceType":"module"}